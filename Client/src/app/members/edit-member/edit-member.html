<div class="member-detail-container" *ngIf="member">
  <!-- Hero Section with Background -->
  <div class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <button class="back-btn" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        <span>Back to Members</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Left Sidebar - Profile Card (35%) -->
    <div class="profile-sidebar">
      <div class="profile-card">
        <!-- Profile Image -->
        <div class="profile-image-container">
          <img 
            [src]="member.photoUrl || '/user.png'" 
            [alt]="member.knownAs"
            class="profile-image"
          >
          <div class="status-indicator online"></div>
        </div>

        <!-- Profile Info -->
        <div class="profile-info">
          <h1 class="profile-name">{{member.knownAs}}</h1>
          <p class="profile-age">{{member.age}} years old</p>
          
          <!-- Location -->
          <div class="info-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>{{member.city}}<span *ngIf="member.country">, {{member.country}}</span></span>
          </div>

          <!-- Last Active -->
          <div class="info-item">
            <i class="fas fa-clock"></i>
            <span>Active {{member.lastActive | date:'short'}}</span>
          </div>

          <!-- Member Since -->
          <div class="info-item">
            <i class="fas fa-calendar-alt"></i>
            <span>Member since {{member.created | date:'MMM yyyy'}}</span>
          </div>

          <!-- Save Button -->
          <div class="action-buttons">
            <button 
              class="btn btn-primary save-btn" 
              [disabled]="!editForm?.dirty || isLoading"
              (click)="updateMember()"
            >
              <i class="fas fa-save" *ngIf="!isLoading"></i>
              <i class="fas fa-spinner fa-spin" *ngIf="isLoading"></i>
              {{isLoading ? 'Saving...' : 'Save Changes'}}
            </button>
          </div>

          <!-- Status Messages -->
          <div class="status-messages">
            <div class="success-message" *ngIf="showSuccessMessage">
              <i class="fas fa-check-circle"></i>
              Profile updated successfully!
            </div>
            <div class="warning-message" *ngIf="hasUnsavedChanges && !showSuccessMessage">
              <i class="fas fa-exclamation-triangle"></i>
              You have unsaved changes
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Content - Tabs Section (65%) -->
    <div class="content-section">
      <!-- Tab Navigation -->
      <div class="tab-navigation">
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'about'"
          (click)="setActiveTab('about')"
        >
          <i class="fas fa-user"></i>
          <span>About</span>
        </button>
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'photos'"
          (click)="setActiveTab('photos')"
        >
          <i class="fas fa-camera"></i>
          <span>Photos</span>
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- About Tab -->
        <div class="tab-panel" *ngIf="activeTab === 'about'">
          <div class="content-card">
            <h3 class="section-title">Edit Your Profile</h3>
            <form #editForm="ngForm" class="edit-form">
              <!-- Description -->
              <div class="form-group">
                <label for="introduction">Description</label>
                <textarea 
                  id="introduction"
                  name="introduction"
                  class="form-control"
                  rows="4"
                  placeholder="Tell others about yourself..."
                  [(ngModel)]="member.introduction"
                  (input)="onFormChange()"
                ></textarea>
              </div>

              <!-- Looking For -->
              <div class="form-group">
                <label for="lookingFor">Looking For</label>
                <textarea 
                  id="lookingFor"
                  name="lookingFor"
                  class="form-control"
                  rows="3"
                  placeholder="What are you looking for in a partner?"
                  [(ngModel)]="member.lookingFor"
                  (input)="onFormChange()"
                ></textarea>
              </div>

              <!-- Interests -->
              <div class="form-group">
                <label for="interests">Interests</label>
                <input 
                  type="text"
                  id="interests"
                  name="interests"
                  class="form-control"
                  placeholder="Music, Sports, Travel, etc."
                  [(ngModel)]="member.interests"
                  (input)="onFormChange()"
                >
              </div>

              <!-- Location Details -->
              <div class="form-row">
                <div class="form-group half-width">
                  <label for="city">City</label>
                  <input 
                    type="text"
                    id="city"
                    name="city"
                    class="form-control"
                    placeholder="Your city"
                    [(ngModel)]="member.city"
                    (input)="onFormChange()"
                  >
                </div>
                <div class="form-group half-width">
                  <label for="country">Country</label>
                  <input 
                    type="text"
                    id="country"
                    name="country"
                    class="form-control"
                    placeholder="Your country"
                    [(ngModel)]="member.country"
                    (input)="onFormChange()"
                  >
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Photos Tab -->
        <div class="tab-panel" *ngIf="activeTab === 'photos'">
          <div class="content-card">
            <h3 class="section-title">Manage Photos</h3>
            <div class="photos-content">
              <div class="photo-upload-section">
                <div class="upload-area">
                  
                  <app-photo-edit [member]="member" (memberChange)="onMemberChange($event)"></app-photo-edit>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="!member">
  <div class="loading-spinner"></div>
  <p class="loading-text">Loading your profile...</p>
</div>

<!-- Global Loading Overlay -->
<div class="global-loader" *ngIf="isLoading">
  <div class="loader-content">
    <div class="spinner"></div>
    <p>Saving changes...</p>
  </div>
</div>
